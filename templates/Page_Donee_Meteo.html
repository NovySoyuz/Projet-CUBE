<!DOCTYPE html>
<html>

<head>
    <!-- Liaison vers une feuille de style externe nommée "Page_Donée_Météo.css" -->
    <link rel="stylesheet" href="Page_Donnee_Meteo.css">
</head>

<body>
    <div class="background">
        <img src="244-2446451_white-clouds-vector-png.png" />
        <img src="244-2446451_white-clouds-vector-png.png" />
    </div>
    <script>
        const xhr = new XMLHttpRequest();
        xhr.open("GET", "http://127.0.0.1:5000/releves");
        xhr.send();
        xhr.responseType = "json";
        xhr.onload = () => {
            if (xhr.readyState == 4 && xhr.status == 200) {
                const data = xhr.response;
                console.log(data); // Vérifiez la structure des données dans la console

                // Manipulation du DOM pour afficher les données
                const temperatureInfo = document.getElementById("temperature-info");
                const humidityInfo = document.getElementById("humidity-info");

                if (data.length > 0) {
                    const lastData = data[data.length - 1];
                    const temperature = lastData[1];  // Index 0 pour la température
                    const humidity = lastData[0];     // Index 1 pour l'humidité
                    temperatureInfo.innerHTML = `<p>Température : ${temperature} °C</p>`;
                    humidityInfo.innerHTML = `<p>Humidité : ${humidity} %</p>`;
                } else {
                    temperatureInfo.innerHTML = "<p>Température : N/A</p>";
                    humidityInfo.innerHTML = "<p>Humidité : N/A</p>";
                }
            } else {
                console.log(`Error: ${xhr.status}`);
            }
        };
    </script>
    <!-- Conteneur principal de la page web -->
    <div class="container">
        <!-- Section d'en-tête avec le titre "Station Météo" -->
        <div class="header">
            <h1>Station Météo</h1>
        </div>
        <!-- Section d'informations météorologiques -->
        <div class="weather-info">
            <!-- Informations sur la localisation -->
            <div class="location">
                <h2>Aix en Provence, France</h2>
            </div>
            <!-- Informations sur la température -->
            <!-- Informations sur la température -->

            <div class="temperature" id="temperature-info">
                <p>Temperature : </p>
            </div>
            <!-- Informations sur l'humidité -->
            <div class="description" id="humidity-info">
                <p>Humidité : </p>
            </div>
            <div class="description" id="pressure-info">
                <p>Pression : </p>
            </div>


        </div>
    </div>

    <!-- fonction permetant de recharger une page web -->
    <script>
        function cliqueSoleil() {
            // Recharge la page actuelle
            location.reload();
        }
    </script>

    <!-- Conteneur supplémentaire avec un formulaire et un bouton à des fins indéterminées -->
    <div class="containerrer">
        <form>
            <!-- Placeholder pour l'action du formulaire (actuellement vide) et la méthode définie sur "get" -->
            <action="" method="get">
        </form>
        <!-- Bouton avec un emoji de soleil et une fonction JavaScript associée "cliqueSoleil()" 
        !!!!!!La fonction n'est pas appelée attention-->
        <button class="soleil-button" onclick="cliqueSoleil()">☀</button>
    </div>

    <!-- Bouton pour naviguer vers une autre page nommée "Page_du_Graphique.html" -->
    <button class="affichage-grapique" onclick="window.location.href = 'Page_du_Graphique.html';">Afficher le
        Graphique</button>
    <div class="background">
       
    </div>

</body>

</html>